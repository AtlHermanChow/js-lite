!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.statsig=e():t.statsig=e()}(this,(function(){return(()=>{var t={763:t=>{t.exports={}},249:function(t,e,n){var r;t.exports=(r=r||function(t,e){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==n.g&&n.g.crypto&&(r=n.g.crypto),!r)try{r=n(906)}catch(t){}var i=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),s={},a=s.lib={},u=a.Base={extend:function(t){var e=o(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},l=a.WordArray=u.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||f).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=s<<24-(r+o)%4*8}else for(o=0;o<i;o+=4)e[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=u.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(i());return new l.init(e,t)}}),c=s.enc={},f=c.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new l.init(n,e/2)}},d=c.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new l.init(n,e)}},g=c.Utf8={stringify:function(t){try{return decodeURIComponent(escape(d.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return d.parse(unescape(encodeURIComponent(t)))}},h=a.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=g.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n,r=this._data,i=r.words,o=r.sigBytes,s=this.blockSize,a=o/(4*s),u=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*s,c=t.min(4*u,o);if(u){for(var f=0;f<u;f+=s)this._doProcessBlock(i,f);n=i.splice(0,u),r.sigBytes-=c}return new l.init(n,c)},clone:function(){var t=u.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),p=(a.Hasher=h.extend({cfg:u.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new p.HMAC.init(t,n).finalize(e)}}}),s.algo={});return s}(Math),r)},269:function(t,e,n){var r;t.exports=(r=n(249),function(){var t=r,e=t.lib.WordArray;function n(t,n,r){for(var i=[],o=0,s=0;s<n;s++)if(s%4){var a=r[t.charCodeAt(s-1)]<<s%4*2|r[t.charCodeAt(s)]>>>6-s%4*2;i[o>>>2]|=a<<24-o%4*8,o++}return e.create(i,o)}t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp();for(var i=[],o=0;o<n;o+=3)for(var s=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)i.push(r.charAt(s>>>6*(3-a)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(t){var e=t.length,r=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<r.length;o++)i[r.charCodeAt(o)]=o}var s=r.charAt(64);if(s){var a=t.indexOf(s);-1!==a&&(e=a)}return n(t,e,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),r.enc.Base64)},153:function(t,e,n){var r;t.exports=(r=n(249),function(t){var e=r,n=e.lib,i=n.WordArray,o=n.Hasher,s=e.algo,a=[],u=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var r=2,i=0;i<64;)e(r)&&(i<8&&(a[i]=n(t.pow(r,.5))),u[i]=n(t.pow(r,1/3)),i++),r++}();var l=[],c=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],c=n[5],f=n[6],d=n[7],g=0;g<64;g++){if(g<16)l[g]=0|t[e+g];else{var h=l[g-15],p=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,y=l[g-2],v=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;l[g]=p+l[g-7]+v+l[g-16]}var m=r&i^r&o^i&o,w=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),b=d+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&c^~a&f)+u[g]+l[g];d=f,f=c,c=a,a=s+b|0,s=o,o=i,i=r,r=b+(w+m)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+c|0,n[6]=n[6]+f|0,n[7]=n[7]+d|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=o._createHelper(c),e.HmacSHA256=o._createHmacHelper(c)}(Math),r.SHA256)},306:t=>{"use strict";t.exports=JSON.parse('{"name":"statsig-js-client-sdk","version":"1.0.21","description":"Statsig javascript client SDK","main":"dist/statsig-prod-node-client-sdk.js","scripts":{"build":"webpack","test":"jest","types":"npx tsc","docs":"jsdoc2md index.js src/typedefs.js src/DynamicConfig.js > docs/generated.md"},"files":["index.d.ts","dist/statsig-prod-node-client-sdk.js","dist/statsig-prod-web-sdk.js","dist/statsig-dev-node-client-sdk.js","dist/statsig-dev-web-sdk.js"],"jsdelivr":"dist/statsig-prod-web-sdk.js","repository":{"type":"git","url":"git+https://github.com/statsig-io/statsig-js-client-sdk.git"},"author":"Statsig, Inc.","license":"ISC","bugs":{"url":"https://github.com/statsig-io/statsig-js-client-sdk/issues"},"keywords":["feature gate","feature flag","continuous deployment","ci","ab test"],"homepage":"https://www.statsig.com","devDependencies":{"@babel/core":"^7.13.1","@babel/preset-env":"^7.13.5","@types/jest":"^26.0.20","babel-loader":"^8.2.2","jest":"^26.6.3","jsdoc":"^3.6.6","jsdoc-to-markdown":"^7.0.0","terser-webpack-plugin":"^5.1.1","typescript":"^4.2.2","webpack":"^5.24.2","webpack-cli":"^4.5.0"},"dependencies":{"crypto-js":"^4.0.0","uuid":"^8.3.2","whatwg-fetch":"^3.6.2"},"types":"dist/main.js"}')},906:()=>{}},e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var r={};return(()=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(r,{default:()=>Y});const i=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),null!=t&&"string"==typeof t||(t=""),this.time=Date.now(),this.eventName=t}var r,i,o;return r=n,(i=[{key:"setValue",value:function(t){null!=t&&"string"!=typeof t&&"number"!=typeof t||(this.value=t)}},{key:"setMetadata",value:function(e){null!=e&&"object"!==t(e)||(this.metadata=e)}},{key:"setUser",value:function(t){this.user=t}},{key:"validate",value:function(){return"string"==typeof this.eventName&&this.eventName.length>0}},{key:"toObject",value:function(){return{time:this.time,eventName:this.eventName,value:this.value,metadata:this.metadata,user:this.user}}}])&&e(r.prototype,i),o&&e(r,o),n}();var o,s="statsig::";function a(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if("function"==typeof t.log){var a=new i(s+n);a.setValue(r),null==o&&(o={}),a.setMetadata(o),a.setUser(e),null!=o.error?t.log(a,n+o.error):t.log(a)}}var u=new Uint8Array(16);function l(){if(!o&&!(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(u)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const f=function(t){return"string"==typeof t&&c.test(t)};for(var d=[],g=0;g<256;++g)d.push((g+256).toString(16).substr(1));const h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(d[t[e+0]]+d[t[e+1]]+d[t[e+2]]+d[t[e+3]]+"-"+d[t[e+4]]+d[t[e+5]]+"-"+d[t[e+6]]+d[t[e+7]]+"-"+d[t[e+8]]+d[t[e+9]]+"-"+d[t[e+10]]+d[t[e+11]]+d[t[e+12]]+d[t[e+13]]+d[t[e+14]]+d[t[e+15]]).toLowerCase();if(!f(n))throw TypeError("Stringified UUID is invalid");return n};const p=function(t,e,n){var r=(t=t||{}).random||(t.rng||l)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return h(r)};function y(t){if("undefined"!=typeof Storage&&"undefined"!=typeof window&&window.localStorage)return window.localStorage.getItem(t)}function v(t,e){"undefined"!=typeof Storage&&"undefined"!=typeof window&&window.localStorage&&window.localStorage.setItem(t,e)}var m="statsig_stable_id",w="statsig_session_id";function b(){return p()}function _(t){var e,n,r=null;return!t&&(r=function(t){if("undefined"!=typeof Storage&&"undefined"!=typeof window&&window.sessionStorage)return window.sessionStorage.getItem(t)}(w))||(r=b(),e=w,n=r,"undefined"!=typeof Storage&&"undefined"!=typeof window&&window.sessionStorage&&window.sessionStorage.setItem(e,n)),r}function S(t){return null==t?null:JSON.parse(JSON.stringify(t))}function j(t){if(null==t)return null;var e=Number(t);return"number"==typeof e&&!isNaN(e)&&isFinite(e)&&null!=t?e:null}function k(t){return null==t?null:"true"===t.toString().toLowerCase()||"false"!==t.toString().toLowerCase()&&null}function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B(t,e,n){"string"==typeof t&&0!==t.length||(t=""),null==e&&(e={}),this.name=t,this.value=S(e),this._groupName=n}B.prototype.validateDefault=function(t,e){if(null==t)throw new Error("You must provide a valid default value to check config parameters");var n=Array.isArray(t)?"array":x(t);if(n!==e)throw new Error("Expected type of "+e+" but got "+n+" for the default value.");return t},B.prototype.getBool=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e=this.validateDefault(e,"boolean"),!t||null==this.value[t])return e;var n=k(this.value[t]);return null==n?e:n},B.prototype.getString=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e=this.validateDefault(e,"string"),!t||null==this.value[t])return e;var n=this.value[t];if("number"==typeof n||"boolean"==typeof n)n=n.toString();else if("object"===x(n))return e;return n},B.prototype.getNumber=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e=this.validateDefault(e,"number"),!t||null==this.value[t])return e;var n=j(this.value[t]);return null==n?e:n},B.prototype.getArray=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e=this.validateDefault(e,"array"),!t||null==this.value[t])return e;var n=this.value[t];return null!=n&&Array.isArray(n)?n:e},B.prototype.getObject=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=this.validateDefault(e,"object"),!t||null==this.value[t])return new B(t,e,"statsig::invalid_config");var n=this.value[t];return"object"!==x(n)?new B(t,e,"statsig::invalid_config"):new B(t,n,this._groupName)},B.prototype.getRawValue=function(){return this.value},B.prototype.getGroupName=function(){return this._groupName};const I=B;function D(t){return new I(null!=t?t:"invalid_config_name",{},"statsig::invalid_config")}var A=[408,500,502,503,504,522,524,599],P={init:function(){null==P.leakyBucket&&(P.leakyBucket={})},postWithTimeout:function(t,e,n,r,i,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1e3;if("string"!=typeof t||0===t.length)return Promise.reject(new Error("url is invalid."));var u=this.post(t,e,n,s,a).then((function(e){return e.ok?e.json().then((function(t){return"function"==typeof r&&r(t),Promise.resolve(t)})):Promise.reject("Request to "+t+" failed with status "+e.status)})).catch((function(t){return"function"==typeof i&&i(t),Promise.reject(t)}));if(null!=o&&"number"==typeof o){var l=new Promise((function(t,e){setTimeout((function(){t()}),o)}));return Promise.race([u,l])}return u},post:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3;this.init();var s=P.leakyBucket[t];if(null!=s&&s>=10)return Promise.reject(new Error("Request failed because you are making the same request too frequently."));P.leakyBucket[t]=null==s?1:s+1;var a={method:"POST",body:JSON.stringify(n),headers:{"Content-type":"application/json; charset=UTF-8","STATSIG-API-KEY":e}};return fetch(t,a).then((function(e){return e.ok?Promise.resolve(e):(A.includes(e.status)||(i=0),Promise.reject("Request to "+t+" failed with status "+e.status))})).catch((function(s){return i>0?new Promise((function(s,a){setTimeout((function(){P.leakyBucket[t]=Math.max(P.leakyBucket[t]-1,0),r.post(t,e,n,i-1,2*o).then(s).catch(a)}),o)})):Promise.reject(s)})).finally((function(){P.leakyBucket[t]=Math.max(P.leakyBucket[t]-1,0)}))}};const U=P;function C(t){var e,r,i,o={},s={},a={stableID:(i=y(m),i||(i=b(),v(m,i),i)),sessionID:_(),sdkType:"statsig-js-client-sdk",sdkVersion:null!==(e=null===(r=n(306))||void 0===r?void 0:r.version)&&void 0!==e?e:""};return o.setUser=function(t){return null==(s=S(t))&&(s={}),a.sessionID=_(!0),!0},o.getUser=function(){return S(s)},o.getStatsigMetadata=function(){return a?S(a):{}},o.getUserID=function(){var t;return null!==(t=s.userID)&&void 0!==t?t:a.stableID},null!=t&&(s=S(t)),o}var E=n(153),O=n.n(E),N=n(269),M=n.n(N);function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function V(t,e){var n,r={cache:{}},i="STATSIG_LOCAL_STORE",o=y(i);if(o)try{var s=JSON.parse(o);if(null!=s)for(var u=0,l=Object.entries(s);u<l.length;u++){var c=z(l[u],2),f=c[0],d=c[1];if(r.cache[f]={gates:d.gates,configs:{}},null!=d.configs)for(var g=0,h=Object.entries(d.configs);g<h.length;g++){var p=z(h[g],2),m=p[0],w=p[1];r.cache[f].configs[m]=new I(w.name,w.value,w._groupName)}}}catch(t){n=i,"undefined"!=typeof Storage&&"undefined"!=typeof window&&window.localStorage&&window.localStorage.removeItem(n)}function b(t){if("object"!==T(t)||null==t)return{};var e={};for(var n in t)n&&t[n]&&(e[n]=new I(n,t[n].value,t[n].group));return e}return r.save=function(e,n){var o=t.getUserID();o&&(r.cache[o]={gates:null!=e?e:{},configs:b(n)},v(i,JSON.stringify(r.cache)))},r.checkGate=function(n){var i;if("string"!=typeof n||0===n.length)return!1;var o=O()(n),s=M().stringify(o),u=t.getUserID(),l=!1;return u&&null!==(i=r.cache[u])&&void 0!==i&&i.gates[s]&&(l=r.cache[u].gates[s]),function(t,e,n,r){a(t,e,"gate_exposure",null,{gate:n,gateValue:r})}(e,t.getUser(),n,l),l},r.getConfig=function(n){var i;if("string"!=typeof n||0===n.length)return D();var o=O()(n),s=M().stringify(o),u=t.getUserID(),l=D();return u&&null!==(i=r.cache[u])&&void 0!==i&&i.configs[s]&&(l=r.cache[u].configs[s],function(t,e,n,r){a(t,e,"config_exposure",null,{config:n,configGroup:r})}(e,t.getUser(),n,l.getGroupName())),l},r}function H(t,e,n){var r={},o=10,s=1e4,u=1e3,l=[],c=null,f=new Set;function d(){null!=c&&clearTimeout(c),c=setTimeout((function(){r.flush()}),s)}return"undefined"!=typeof window&&"function"==typeof window.addEventListener&&(window.addEventListener("blur",(function(){return r.flush()})),window.addEventListener("beforeunload",(function(){return r.flush()}))),"undefined"!=typeof document&&"function"==typeof document.addEventListener&&document.addEventListener("visibilitychange",(function(){"visible"!==document.visibilityState&&r.flush()})),r.setFlushInterval=function(t){s=t},r.setFlushBatchSize=function(t){o=t,l.length>o&&this.flush()},r.setMaxEventQueueSize=function(t){u=t},r.log=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t instanceof i&&t.validate()){if(null!=e){if(f.has(e))return;f.add(e)}l.push(t),l.length>=o&&r.flush(),d()}},r.flush=function(){var r=this;if(0!==l.length){var i=l;l=[],U.post(e.api+"/log_event",n,{statsigMetadata:t.getStatsigMetadata(),events:i}).then((function(t){if(!t.ok)throw Error(t.statusText)})).catch((function(e){(l=i.concat(l)).length>=o&&(o=Math.min(l.length+o,u)),l.length>u&&(l=l.slice(l.length-u+10)),a(r,t.getUser(),"log_event_failed",null,{error:e.message})})).finally((function(){d()}))}},r.switchUser=function(){r.flush()},r}n(763);var L="https://api.statsig.com/v1";function F(t){if(null==t||t=={})return{api:L};return{api:function(e,n){var r=t[e];if(null==r||"string"!=typeof r)return n;return r}("api",L)}}function G(t){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n(763);var J=64,W=1024,q={initialize:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return null!=q._ready?Promise.resolve():"string"!=typeof t||0===t.length||!t.startsWith("client-")&&!t.startsWith("test-")?Promise.reject(new Error("Invalid key provided.  You must use a Client or Test SDK Key from the Statsig console with the js-client-sdk")):(q._ready=!1,q._identity=C(Q(e)),q._sdkKey=t,q._options=F(n),q._logger=H(q._identity,q._options,t),q._store=V(q._identity,q._logger),this._fetchValues().catch((function(t){return Promise.resolve()})).finally((function(){q._ready=!0})))},checkGate:function(t){if(null==q._store)return!1;if("string"!=typeof t)throw new Error("Must pass a valid string as a gateName to check");return q._store.checkGate(t)},getConfig:function(t){if(null==q._store)return D();if("string"!=typeof t)throw new Error("Must pass a valid string as a configName to check");return q._store.getConfig(t)},logEvent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null!=q._logger&&null!=t){K(t,J)&&(t=t.substring(0,J)),"string"==typeof e&&K(e,J)&&(e=e.substring(0,J)),K(n,W)&&(n={error:"not logged due to size too large"});var r=new i(t);r.setValue(e),r.setMetadata(n),r.setUser(q._identity.getUser()),q._logger.log(r)}},updateUser:function(t){return null!=q._identity&&q._ready?(q._ready=!1,t=Q(t),q._identity.setUser(t),q._logger.switchUser(),q._fetchValues().then((function(){return Promise.resolve(!0)})).catch((function(t){return Promise.resolve(!1)})).finally((function(){q._ready=!0}))):Promise.resolve(!1)},isReady:function(){return!0===q._ready},shutdown:function(){null!=q._logger&&q._logger.flush()},_configure:function(t){q.pollingDelay=3e3,q.maxPollingDelay=18e4;var e=j(null==t?void 0:t.pollingDelay);null!=e&&(q.pollingDelay=e);var n=j(null==t?void 0:t.maxPollingDelay);if(null!=n&&(q.maxPollingDelay=n),null!=q._logger){var r=j(null==t?void 0:t.flushInterval);null!=r&&q._logger.setFlushInterval(r);var i=j(null==t?void 0:t.flushBatchSize);null!=r&&q._logger.setFlushBatchSize(i);var o=j(null==t?void 0:t.maxEventQueueSize);null!=o&&q._logger.setMaxEventQueueSize(o)}},_fetchValues:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return U.postWithTimeout(q._options.api+"/initialize",q._sdkKey,{user:q._identity.getUser(),statsigMetadata:q._identity.getStatsigMetadata()},(function(e){q._store.save(e.gates,e.configs),q._configure(e.sdkParams),"function"==typeof t&&t(e)}),(function(t){a(q._logger,q._identity.getUser(),"fetch_values_failed",null,{error:t.message}),"function"==typeof e&&e(t)}),3e3,10)}};function K(t,e){return null!=t&&("string"==typeof t?t.length>e:"object"===G(t)?JSON.stringify(t).length>e:"number"==typeof t&&t.toString().length>e)}function Q(t){return null==t?null:(K(t.userID,J)&&(t.userID=t.userID.toString().substring(0,J)),K(t,W)&&(t.custom={},K(t,W)&&(t={userID:t.userID})),t)}const Y=q})(),r=r.default})()}));